<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <title>Favorite Random Facts</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="/css/styles.css" />
</head>

<body>
    <header class="site-header">
        <div class="container">
            <h1>Favorite Random Facts</h1>
            <nav>
                <a href="/">Home</a>
                <a href="/favorites">Favorites</a>
            </nav>
        </div>
    </header>

    <main class="container">
        <section class="card">
            <h2>Your favorites</h2>

            <% if (!favorites || favorites.length===0) { %>
                <p>You don't have any favorite facts yet.</p>
            <% } else { %>
                <ul class="favorites-list">
                    <% favorites.forEach(function(fact) { %>
                        <li class="favorite-item">
                            <p class="fact-text"><%= fact.text %></p>
                            <p class="meta">
                                <span>Type: <strong><%= fact.type %></strong></span>
                                <span>Language: <strong><%= fact.language %></strong></span>
                                <span>Saved: <%= fact.createdAt.toLocaleString() %></span>
                                <% if (fact.sourceUrl) { %>
                                    <span>
                                        <a href="<%= fact.sourceUrl %>" target="_blank" rel="noopener noreferrer">Source</a>
                                    </span>
                                <% } %>
                            </p>

                            <form action="/favorites/delete/<%= fact._id %>" method="POST">
                                <button type="submit" class="secondary-button">
                                    Remove from favorites
                                </button>
                            </form>
                        </li>
                    <% }) %>
                </ul>
            <% } %>
        </section>
    </main>
</body>

</html>